<!DOCTYPE html>
<html>
<head>
<title>Comunify</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
body{margin:0;font-family:system-ui,sans-serif;background:#f8fafc;}

.leaflet-marker-icon,.leaflet-div-icon{
background:none!important;border:none!important;box-shadow:none!important;width:0!important;height:0!important;
}

.emoji-marker{
position:absolute;transform:translate(-50%,-50%);
font-size:28px;line-height:28px;pointer-events:auto;
filter:drop-shadow(0 0 4px rgba(37,99,235,0.6));
}

/* ---------- JOIN SCREEN (COMMUNITY STYLE) ---------- */

#join{
position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
background:linear-gradient(135deg,#7c3aed,#ec4899,#f59e0b);
z-index:2000;color:white;
overflow:hidden;
}

/* glow circles */

#join:before,#join:after{
content:"";
position:absolute;
width:420px;height:420px;
border-radius:50%;
filter:blur(90px);
opacity:.35;
}

#join:before{background:#fde68a;top:-120px;left:-120px;}
#join:after{background:#c4b5fd;bottom:-120px;right:-120px;}

#joinBox{
position:relative;
background:white;color:black;padding:36px;border-radius:20px;width:360px;
box-shadow:0 30px 70px rgba(0,0,0,.28);
text-align:center;
animation:pop .45s ease;
}

@keyframes pop{
from{transform:scale(.95);opacity:0}
to{transform:scale(1);opacity:1}
}

.badge{
display:inline-block;
background:#f3e8ff;
color:#7c3aed;
font-size:12px;
padding:4px 10px;
border-radius:20px;
margin-bottom:12px;
font-weight:600;
}

#joinBox h1{
margin:6px 0;
font-size:30px;
background:linear-gradient(135deg,#7c3aed,#ec4899);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}

.tagline{
color:#555;font-size:15px;margin-bottom:18px;line-height:1.4;
}

.micro{font-size:12px;color:#888;margin-top:8px;}

#joinBox input,#joinBox select{
width:100%;padding:13px;margin-bottom:14px;border-radius:12px;
border:1px solid #ddd;font-size:15px;transition:.2s;
}

#joinBox input:focus,#joinBox select:focus{
outline:none;
border-color:#7c3aed;
box-shadow:0 0 0 3px rgba(124,58,237,.15);
}

#joinBox button{
width:100%;padding:14px;
background:linear-gradient(135deg,#7c3aed,#ec4899);
color:white;border:none;border-radius:14px;font-size:16px;
cursor:pointer;font-weight:600;
box-shadow:0 8px 24px rgba(0,0,0,.25);
transition:.25s;
}

#joinBox button:hover{
transform:translateY(-1px);
box-shadow:0 12px 28px rgba(0,0,0,.3);
}

/* ---------- MAP ---------- */

#map{height:100vh;width:100%;}

.panel{
position:absolute;top:15px;left:15px;background:white;padding:12px 15px;
border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.15);z-index:1000;
}

/* ---------- CHAT ---------- */

#chat{
position:absolute;bottom:20px;right:20px;width:330px;background:white;border-radius:14px;
box-shadow:0 20px 50px rgba(0,0,0,.35);display:none;overflow:hidden;z-index:1000;
border:1px solid #e5e7eb;
}

#chatHeader{
background:#7c3aed;color:white;padding:12px;font-weight:bold;
display:flex;justify-content:space-between;align-items:center;
}

#messages{height:260px;overflow-y:auto;padding:12px;background:#f1f5f9;}

/* typing dots */

#typing{padding:6px 12px;background:#f1f5f9;display:none;}

.typingBubble{
display:inline-flex;gap:4px;padding:6px 10px;background:#e5e7eb;border-radius:12px;width:42px;justify-content:center;
}

.typingDot{
width:6px;height:6px;background:#6b7280;border-radius:50%;
animation:blink 1.4s infinite both;
}
.typingDot:nth-child(2){animation-delay:.2s}
.typingDot:nth-child(3){animation-delay:.4s}

@keyframes blink{
0%,80%,100%{opacity:.2;transform:translateY(0)}
40%{opacity:1;transform:translateY(-3px)}
}

.msgRow{display:flex;margin:6px 0;}
.msgMine{justify-content:flex-end;}
.msgOther{justify-content:flex-start;}

.bubble{
padding:8px 12px;border-radius:14px;max-width:70%;
font-size:14px;box-shadow:0 2px 6px rgba(0,0,0,.1);
}

.mine{background:#7c3aed;color:white;}
.other{background:#e5e7eb;color:black;}

.time{font-size:10px;opacity:.7;margin-top:2px;text-align:right;}

#inputBar{display:flex;border-top:1px solid #ddd;background:white;}
#msg{flex:1;padding:10px;border:none;font-size:14px;}

#chat button{background:#7c3aed;color:white;border:none;padding:10px 12px;cursor:pointer;}

.emojiBar{display:flex;gap:6px;padding:6px;border-top:1px solid #eee;background:white;}
.emojiBar button{background:#f1f5f9;border:none;border-radius:6px;padding:4px 6px;cursor:pointer;}

#disconnectBtn{background:#ef4444;color:white;border:none;padding:4px 8px;border-radius:6px;cursor:pointer;font-size:12px;}

#modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.3);z-index:3000;}
#modalBox{background:white;padding:20px;border-radius:12px;width:300px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.2);}
#modalBox button{margin:10px;padding:8px 14px;border:none;border-radius:8px;cursor:pointer;}

</style>
</head>

<body>

<div id="join">
<div id="joinBox">

<div class="badge">LIVE ‚Ä¢ people nearby now</div>

<h1>Comunify</h1>

<div class="tagline">
Meet people around you who share your interests.<br>
Turn proximity into real community.
</div>

<input id="nameInput" placeholder="Enter your name">

<select id="interestInput">
<option value="">Choose your interest</option>
<option value="chess">‚ôüÔ∏è Chess</option>
<option value="cricket">üèè Cricket</option>
<option value="music">üéµ Music</option>
<option value="startup">üöÄ Startup</option>
<option value="fitness">üí™ Fitness</option>
<option value="coding">üíª Coding</option>
</select>

<button onclick="start()">Start discovering</button>

<div class="micro">Location is used only to show nearby people.</div>

</div>
</div>

<!-- EVERYTHING BELOW UNCHANGED -->

<div class="panel">
<b id="me"></b><br>
<span id="status">üü° Nearby users</span>
</div>

<div id="map"></div>

<div id="chat">
<div id="chatHeader">
<span id="chatTitle">Chat</span>
<button id="disconnectBtn" onclick="disconnect()">Disconnect</button>
</div>

<div id="messages"></div>

<div id="typing">
<div class="typingBubble">
<div class="typingDot"></div>
<div class="typingDot"></div>
<div class="typingDot"></div>
</div>
</div>

<div class="emojiBar">
<button onclick="addEmoji('üòÄ')">üòÄ</button>
<button onclick="addEmoji('üî•')">üî•</button>
<button onclick="addEmoji('üëç')">üëç</button>
<button onclick="addEmoji('‚ù§Ô∏è')">‚ù§Ô∏è</button>
</div>

<div id="inputBar">
<input id="msg" placeholder="Type message...">
<button onclick="sendMsg()">Send</button>
</div>
</div>

<div id="modal">
<div id="modalBox">
<div id="modalText"></div>
<button onclick="accept()">Accept</button>
<button onclick="reject()">Reject</button>
</div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- KEEP YOUR EXISTING JS EXACTLY AS IT IS -->
<script>
/* paste your existing JS here unchanged */
</script>

</body>
</html>
